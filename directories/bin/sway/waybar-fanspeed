#!/usr/bin/env bash
#Maintained in linux-config.org
cd /sys/class/hwmon
curhwmon=""
while read -r fanfile ; do
    speed=$(cat "${fanfile}")
    if [ ! "${speed}" = "0" ]; then
        hwmon=$(sed 's@^[^0-9]*\([0-9]\+\).*@\1@' <<< "${fanfile}")
        if [ ! "${hwmon}" = "${curhwmon}" ]; then
            curhwmon="${hwmon}"
            thisoutput="<span color='gold'>hwmon${hwmon}</span>:"
        else
            thisoutput=""
        fi
        fanid=$(sed 's/[^0-9]//g' <<<  $(basename "${fanfile}"))
        output="${output}${thisoutput}<span color='orange'>${fanid} </span><span color='green'>${speed} </span>"
    fi
done < <(find -L . -maxdepth 2 -type f -name "fan*input" 2> /dev/null | sort )

echo "${output:-No Active Fans Read}"

#!/usr/bin/env bash
#Maintained in linux-config.org
cd /sys/class/hwmon
curhwmon=""
while read -r fanfile ; do
    speed=$(cat "${fanfile}")
    if [ ! "${speed}" = "0" ]; then
        hwmon=$(sed 's@^[^0-9]*\([0-9]\+\).*@\1@' <<< "${fanfile}")
        if [ ! "${hwmon}" = "${curhwmon}" ]; then
            curhwmon="${hwmon}"
            thisoutput="<span color='gold'>hwmon${hwmon}</span>:"
        else
            thisoutput=""
        fi
        fanid=$(sed 's/[^0-9]//g' <<<  $(basename "${fanfile}"))
        output="${output}${thisoutput}<span color='orange'>${fanid} </span><span color='green'>${speed} </span>"
    fi
done < <(find -L . -maxdepth 2 -type f -name "fan*input" 2> /dev/null | sort )

echo "${output:-No Active Fans Read}"
