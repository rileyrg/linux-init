#!/usr/bin/env bash
#Maintained in linux-config.org
output=""
cd /sys/class/hwmon
for d in hwmon*; do
    thisoutput=""
    for fan in {1..10}; do
        f="${d}/fan${fan}_input"
        if [ -f "${f}" ];then
            speed=$(cat "${f}")
            if [ ! "${speed}" = "0" ]; then
                if [ ! "${thisoutput}" ];then
                    thisoutput="<span color='gold'>${d}</span>:"
                else
                    thisoutput="${thisoutput} "
                fi
                thisoutput="${thisoutput}<span color='orange'>${fan}</span> <span color='green'>${speed}</span>"
            fi
        fi
    done
    if [ "${thisoutput}" ];then
        output="${output} ${thisoutput} "
    fi
done
if [ "${output}" ];then
    echo "${output} "
fi
