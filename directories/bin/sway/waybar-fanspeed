#!/usr/bin/env bash
#Maintained in linux-config.org
output=""
cd /sys/class/hwmon
for d in hwmon*; do
    thisoutput=""
    for fan in "${d}"/fan*_input; do
        if [ -f "${fan}" ];then
            speed=$(cat "${fan}")
            if [ ! "${speed}" = "0" ]; then
                if [ ! "${thisoutput}" ];then
                    thisoutput="<span color='gold'>${d}</span>:"
                else
                    thisoutput="${thisoutput} "
                fi
                fanfile=$(basename ${fan})
                fanid=$(sed 's/[^0-9]//g' <<< ${fanfile%_*})
                thisoutput="${thisoutput}<span color='orange'>${fanid} </span><span color='green'>${speed}</span>"
            fi
        fi
    done
    if [ "${thisoutput}" ];then
        output="${output} ${thisoutput} "
    fi
done
if [ "${output}" ];then
    echo "${output} "
fi
